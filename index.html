<!DOCTYPE html>
<html>
  <head>
    <style>
      :root {
        --win-color: #79ea86;
        --lose-color: #e75757;
        --win-secondary: #2ee143;
        --lose-secondary: #e12f2f;
      }
      body {
        background: rgba(0, 0, 0, 0);
        font-family: Arial, sans-serif;
        color: white;
        text-align: center;
      }
      #container {
        width: 600px;
        margin: 20px auto;
        position: relative;
      }
      .main {
        position: relative;
        width: 100%;
        height: 300px;
        background-size: cover;
        background-position: center;
        border-radius: 10px;
        overflow: hidden;
      }
      .hero-name {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 38px;
        font-weight: bold;
        text-shadow: 2px 2px 2px black;
      }
      .stats {
        position: absolute;
        bottom: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.7);
      }
      #bar {
        display: flex;
        height: 20px;
        width: 100%;
      }
      #win-bar {
        background: var(--win-color);
        flex: 0;
        transition: flex 0.5s ease;
      }
      #lose-bar {
        background: var(--lose-color);
        flex: 0;
        transition: flex 0.5s ease;
      }
      .winrate {
        display: flex;
        justify-content: space-between;
        align-items: middle;
        padding: 10px 20px;
        font-size: 24px;
        height: 100%;
      }
      #wins {
        font-weight: 600;
        color: var(--win-color);
      }
      #losses {
        font-weight: 600;
        color: var(--lose-color);
      }
      #winrate {
        font-size: 28px;
        font-weight: 600;
      }
      .history {
        display: flex;
        justify-content: center;
        gap: 5px;
        margin-bottom: 10px;
      }
      .match {
        width: 30px;
        height: 30px;
        border-radius: 3px;
      }
      .win {
        background: var(--win-color);
        box-shadow: inset 0px 0px 10px 4px var(--win-secondary);
      }
      .lose {
        background: var(--lose-color);
        box-shadow: inset 0px 0px 10px 4px var(--lose-secondary);
      }
      /* Ð•Ñ„ÐµÐºÑ‚Ð¸ */
      #crown {
        position: absolute;
        top: -50px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 125px;
        color: gold;
        opacity: 0;
        transition: all 1s ease;
      }
      #crown.active {
        top: 20px;
        opacity: 1;
      }
      #crack {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("https://img.freepik.com/premium-vector/earthquake-cracking-holes-ground-cracks-top-view-crushed-texture-black-background_136545-711.jpg")
          no-repeat center; /* Ð¢Ñ€Ñ–Ñ‰Ð¸Ð½Ð° */
        background-size: cover;
        opacity: 0;
        transition: opacity 0.5s ease;
      }
      #crack.active {
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div class="history"></div>
      <div
        class="main"
        style="background-image: url('https://example.com/default.jpg')"
      >
        <span class="hero-name"></span>
        <div class="stats">
          <div id="bar">
            <div id="win-bar"></div>
            <div id="lose-bar"></div>
          </div>
          <div class="winrate">
            <span id="wins">0</span>
            <span id="winrate">0%</span>
            <span id="losses">0</span>
          </div>
        </div>
        <!-- Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð¸ Ð´Ð»Ñ ÐµÑ„ÐµÐºÑ‚Ñ–Ð² -->
        <span id="crown">ðŸ‘‘</span>
        <div id="crack"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
      function getHeroImage(deckName) {
  const heroes = {
    "Death Knight": [
      "death knight",
      "dk",
      "Ð´Ðº",
      "Ð´ÐµÐº",
      "deathknight",
      "Ð»Ð¸Ñ†Ð°Ñ€ ÑÐ¼ÐµÑ€Ñ‚Ñ–",
      "ls",
    ],
    Warrior: ["warrior", "war", "Ð²Ð°Ñ€", "Ð²Ð¾Ñ—Ð½", "Ð²Ð¾Ñ—Ð½ÐºÐ°", "warr"],
    Mage: ["mage", "mg", "Ð¼Ð°Ð³", "Ð¼Ð°Ð³Ð°", "Ð¼Ð³"],
    Rogue: ["rogue", "rog", "Ñ€Ð¾Ð³Ð°", "Ñ€Ð¾Ð·Ð±Ñ–Ð¹Ð½Ð¸Ðº", "Ñ€Ð¾Ð·Ð±", "ro"],
    Shaman: ["shaman", "sham", "ÑˆÐ°Ð¼", "ÑˆÐ°Ð¼Ð°Ð½", "ÑˆÐ¼", "sh"],
    Warlock: ["warlock", "wl", "Ð²Ð°Ñ€Ð»Ð¾Ðº", "Ð²Ð»", "lock", "Ð»Ð¾Ðº"],
    Priest: ["priest", "pr", "Ð¿Ñ€Ñ–ÑÑ‚", "Ð¶Ñ€ÐµÑ†ÑŒ", "Ð¶Ñ€"],
    Paladin: ["paladin", "pal", "Ð¿Ð°Ð»", "Ð¿Ð°Ð»Ð°Ð´Ð¸Ð½", "Ð¿Ð»", "pally", "Ð¿Ð°Ð»Ñ–"],
    Hunter: ["hunter", "hunt", "Ñ…Ð°Ð½Ñ‚", "Ð¼Ð¸ÑÐ»Ð¸Ð²ÐµÑ†ÑŒ", "Ð¼Ð¸Ñ", "hn"],
    Druid: ["druid", "dru", "Ð´Ñ€Ñƒ", "Ð´Ñ€ÑƒÑ—Ð´", "Ð´Ñ€ÑƒÐ»ÑŒ"],
    "Demon Hunter": [
      "demon hunter",
      "dh",
      "Ð´Ñ…",
      "Ð´ÐµÐ¼Ð¾Ð½ Ñ…Ð°Ð½Ñ‚ÐµÑ€",
      "Ð´ÐµÐ¼Ð¾Ð½",
      "dhunt",
    ],
    Default: [],
  };

  const images = {
          "Death Knight": "https://i.redd.it/7wrdzdooldx91.png",
          Warrior:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt5677de4c919e9430/5e4da44ca9f0fb732c24c397/warrior.jpg",
          Mage: "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/bltfad439f31b38dad2/5e4da46f8286c81bdae7858c/mage.jpg",
          Rogue:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt2fc4edc7ed836f8a/5e6008788286c81bdae78b9d/Rogue.jpg",
          Shaman:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/bltd6694bd0e56ba114/5e4da3cba481381bd5d2e9d7/shaman.jpg",
          Warlock:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/bltad0a2dc55b70fa29/5e4ee38e8d83401be1195eaa/warlock.jpg",
          Priest:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt4ff23385f5f401ef/5e500e588dc1e51c53168a5a/priest.jpg",
          Paladin:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt198019879a096f53/5e4ebd3a8dc1e51c531689a4/paladin.jpg",
          Hunter:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt12bb0cfe0878742b/5e4da461a9f0fb732c24c39b/hunter.jpg",
          Druid:
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt810ba2b34c90b740/5e501a45297b4d1b5ff02394/druid.jpg",
          "Demon Hunter":
            "https://blz-contentstack-images.akamaized.net/v3/assets/bltc965041283bac56c/blt881c2890e465706d/5e5fe3d58902221b5e1dd5ea/dh.jpg",

          Default:
            "https://i.pinimg.com/736x/80/a5/9d/80a59d687a0b0794efa2bcf62f7110ae.jpg",
        };

  // Ð Ð¾Ð·Ð±Ð¸Ð²Ð°Ñ”Ð¼Ð¾ Ð½Ð°Ð·Ð²Ñƒ Ð½Ð° ÑÐ»Ð¾Ð²Ð°
  const words = deckName.toLowerCase().split(/\s+/);

  // Ð¨ÑƒÐºÐ°Ñ”Ð¼Ð¾ Ð·Ð±Ñ–Ð³Ð¸ Ð´Ð»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ ÐºÐ»Ð°ÑÑƒ
  let bestMatch = null;
  let bestMatchLength = 0;

  for (const [hero, aliases] of Object.entries(heroes)) {
    for (const alias of aliases) {
      // ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”Ð¼Ð¾, Ñ‡Ð¸ Ñ” Ð°Ð»Ñ–Ð°Ñ Ñ‚Ð¾Ñ‡Ð½Ð¸Ð¼ ÑÐ»Ð¾Ð²Ð¾Ð¼ Ñƒ Ð½Ð°Ð·Ð²Ñ–
      if (words.includes(alias) && alias.length > bestMatchLength) {
        bestMatch = hero;
        bestMatchLength = alias.length;
      }
      // Ð”Ð¾Ð´Ð°Ñ‚ÐºÐ¾Ð²Ð¾ Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”Ð¼Ð¾ Ð¿Ð¾Ð²Ð½Ñ– Ñ„Ñ€Ð°Ð·Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, "demon hunter")
      if (deckName.toLowerCase().includes(alias) && alias.length > bestMatchLength) {
        bestMatch = hero;
        bestMatchLength = alias.length;
      }
    }
  }

  return images[bestMatch || "Default"];
}

      let prevWins = 0;
      let prevLosses = 0;
      let prevDeck = '';

      function triggerWinEffect() {
        // ÐšÐ¾Ð½Ñ„ÐµÑ‚Ñ–
        confetti({
          particleCount: 75,
          spread: 75,
          origin: { y: 0.6 },
        });

        // ÐšÐ¾Ñ€Ð¾Ð½Ð°
        const crown = document.getElementById("crown");
        crown.classList.add("active");
        setTimeout(() => crown.classList.remove("active"), 1000);
      }

      function triggerLoseEffect() {
        // Ð¢Ñ€Ñ–Ñ‰Ð¸Ð½Ð°
        const crack = document.getElementById("crack");
        crack.classList.add("active");
        setTimeout(() => crack.classList.remove("active"), 1000); // Ð—Ð½Ð¸ÐºÐ°Ñ” Ñ‡ÐµÑ€ÐµÐ· 1 ÑÐµÐºÑƒÐ½Ð´Ñƒ
      }

      function updateStats() {
        fetch(
          "https://deck-stats.glitch.me/stats"
        )
          .then((response) => response.json())
          .then((data) => {
            const current = data.decks[data.currentDeck] || {
              wins: 0,
              losses: 0,
              history: [],
            };
            const total = current.wins + current.losses;
            const winrate =
              total > 0 ? ((current.wins / total) * 100).toFixed(1) : 0;

            document.querySelector(
              ".main"
            ).style.backgroundImage = `url('${getHeroImage(
              data.currentDeck
            )}')`;
            document.querySelector(".hero-name").innerText = data.currentDeck;

            // ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Ð½Ð° Ð·Ð¼Ñ–Ð½Ñƒ ÐºÐ¾Ð»Ð¾Ð´Ð¸
            if (data.currentDeck !== prevDeck) {
              prevWins = current.wins;
              prevLosses = current.losses;
              prevDeck = data.currentDeck;
            } else {
              if (current.wins > prevWins) triggerWinEffect();
              if (current.losses > prevLosses) triggerLoseEffect();
              prevWins = current.wins;
              prevLosses = current.losses;
            }

            // ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
            document.getElementById("wins").innerText = current.wins;
            document.getElementById("losses").innerText = current.losses;
            document.getElementById("winrate").innerText = `${winrate}%`;
            document.getElementById("win-bar").style.flex = current.wins;
            document.getElementById("lose-bar").style.flex = current.losses;

            // ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ñ–ÑÑ‚Ð¾Ñ€Ñ–Ñ—
            const historyDiv = document.querySelector(".history");
            historyDiv.innerHTML = "";
            current.history.slice(-15).forEach((result) => {
              const match = document.createElement("div");
              match.className = `match ${result}`;
              historyDiv.appendChild(match);
            });
          })
          .catch((error) => console.error("Error fetching stats:", error));
      }

      updateStats();
      setInterval(updateStats, 5000);
    </script>
  </body>
</html>
